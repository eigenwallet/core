# This file was auto-generated by `orchestrator` on 2025-11-10 14:52:27 UTC
#
# It is pinned to build the `asb` and `asb-controller` images from this commit:
# https://github.com/eigenwallet/core.git#833fc0ab24e40555d53f05e6e04728460dab5988
#
# If the code does not match the hash, the build will fail. This ensures that the code cannot be altered by Github.
# The compiled `orchestrator` has this hash burned into the binary.
#
# To update the `asb` and `asb-controller` images, you need to either:
# - re-compile the `orchestrator` binary from a commit from Github
# - download a newer pre-compiled version of the `orchestrator` binary from Github.
#
# After updating the `orchestrator` binary, re-generate the compose file by running `orchestrator` again.
#
# The used images for `bitcoind`, `monerod`, `electrs` are pinned to specific hashes which prevents them from being altered by the Docker registry.
#
# Please check for new releases regularly. Breaking network changes are rare, but they do happen from time to time.
name: mainnet_monero_mainnet_bitcoin
services:
  monerod:
    container_name: monerod
    image: ghcr.io/sethforprivacy/simple-monerod@sha256:f30e5706a335c384e4cf420215cbffd1196f0b3a11d4dd4e819fe3e0bca41ec5
    restart: unless-stopped
    user: root
    volumes:
      - 'monerod-data:/monerod-data'
    expose:
      - 18081
    entrypoint: ''
    command: ["monerod","--rpc-bind-ip=0.0.0.0","--rpc-bind-port=18081","--data-dir=/monerod-data","--confirm-external-bind","--restricted-rpc","--non-interactive","--enable-dns-blocklist"]
  bitcoind:
    container_name: bitcoind
    image: getumbrel/bitcoind@sha256:c565266ea302c9ab2fc490f04ff14e584210cde3d0d991b8309157e5dfae9e8d
    restart: unless-stopped
    volumes:
      - 'bitcoind-data:/bitcoind-data'
    expose:
      - 8332
      - 8333
    user: root
    entrypoint: ''
    command: ["bitcoind","-chain=main","-rpcallowip=0.0.0.0/0","-rpcbind=0.0.0.0:8332","-bind=0.0.0.0:8333","-datadir=/bitcoind-data","-dbcache=16384","-server=1","-prune=0","-txindex=1"]
  electrs:
    container_name: electrs
    image: getumbrel/electrs@sha256:622657fbdc7331a69f5b3444e6f87867d51ac27d90c399c8bf25d9aab020052b
    restart: unless-stopped
    user: root
    depends_on:
      - bitcoind
    volumes:
      - 'bitcoind-data:/bitcoind-data'
      - 'electrs-data:/electrs-data'
    expose:
      - 50001
    entrypoint: ''
    command: ["electrs","--network=bitcoin","--daemon-dir=/bitcoind-data","--db-dir=/electrs-data/db","--daemon-rpc-addr=bitcoind:8332","--daemon-p2p-addr=bitcoind:8333","--electrum-rpc-addr=0.0.0.0:50001","--log-filters=INFO"]
  asb:
    container_name: asb
    build: { context: "https://github.com/eigenwallet/core.git#833fc0ab24e40555d53f05e6e04728460dab5988", dockerfile: "./swap-asb/Dockerfile" }
    restart: unless-stopped
    depends_on:
      - electrs
      - monerod
    volumes:
      - 'asb-data:/asb-data'
      - './config.toml:/asb-data/config.toml'
    ports:
      - '0.0.0.0:9939:9939'
    entrypoint: ''
    command: ["asb","--config=/asb-data/config.toml","start","--rpc-bind-port=9944","--rpc-bind-host=0.0.0.0"]
  asb-controller:
    container_name: asb-controller
    build: { context: "https://github.com/eigenwallet/core.git#833fc0ab24e40555d53f05e6e04728460dab5988", dockerfile: "./swap-controller/Dockerfile" }
    stdin_open: true
    tty: true
    restart: unless-stopped
    depends_on:
      - asb
    entrypoint: ''
    command: ["asb-controller","--url=http://asb:9944"]
  asb-tracing-logger:
    container_name: asb-tracing-logger
    image: alpine@sha256:4bcff63911fcb4448bd4fdacec207030997caf25e9bea4045fa6c8c44de311d1
    restart: unless-stopped
    depends_on:
      - asb
    volumes:
      - 'asb-data:/asb-data:ro'
    entrypoint: ''
    command: ["sh","-c","tail -f /asb-data/logs/tracing*.log"]
  rendezvous-node:
    container_name: rendezvous-node
    build: { context: "https://github.com/eigenwallet/core.git#833fc0ab24e40555d53f05e6e04728460dab5988", dockerfile: "./libp2p-rendezvous-node/Dockerfile" }
    restart: unless-stopped
    volumes:
      - 'rendezvous-data:/rendezvous-data'
    ports:
      - '0.0.0.0:8888:8888'
    entrypoint: ''
    command: ["rendezvous-node","--data-dir=/rendezvous-data","--port=8888"]
volumes:
  monerod-data:
  bitcoind-data:
  electrs-data:
  asb-data:
  rendezvous-data:
